(this.webpackJsonpreactrf=this.webpackJsonpreactrf||[]).push([[0],{53:function(t,e,a){t.exports=a(94)},58:function(t,e,a){},78:function(t,e){},80:function(t,e){},94:function(t,e,a){"use strict";a.r(e);var n=a(0),o=a.n(n),s=a(48),r=a.n(s),c=(a(58),a(3)),l=a(4),i=a(6),m=a(5),u=a(7),d=a.n(u),p=a(13),h=a(9),f=a.n(h),b=function(t){Object(i.a)(a,t);var e=Object(m.a)(a);function a(){var t;Object(c.a)(this,a);for(var n=arguments.length,o=new Array(n),s=0;s<n;s++)o[s]=arguments[s];return(t=e.call.apply(e,[this].concat(o))).state={Username:"",Granted:!1},t.onChangeU=function(e){t.setState({Username:e.target.value})},t.onSubmit=function(){var e=Object(p.a)(d.a.mark((function e(a){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.preventDefault(),e.next=3,f.a.post("http://app.bazarsefid.com/api/Administrator/AdminLogin",null,{params:{phone:t.state.Username}}).then((function(e){console.log(e),200==e.status&&(sessionStorage.setItem("phone",t.state.Username),console.log("accepted"),window.location.href="/Code"),401==e.status&&t.setState({Granted:!1}),console.log(e)})).catch((function(t){"Unauthorized"==t.response.statusText?console.log("phone is not valid"):console.log("phone format is wrong")}));case 3:e.sent,t.setState({Username:""}),t.props.loginGranted(t.state.Granted),console.log(t.state.Granted);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),t}return Object(l.a)(a,[{key:"render",value:function(){return o.a.createElement("div",null,o.a.createElement("link",{href:"https://stackpath.bootstrapcdn.com/bootswatch/4.5.0/solar/bootstrap.min.css",rel:"stylesheet",integrity:"sha384-iDw+DjLp94cdk+ODAgTY4IZ6d9aaRpG9KHr168TPxrfQ9wv/DTVC+cWyojoxjHBT",crossorigin:"anonymous"}),o.a.createElement("div",{class:"row mt-5"},o.a.createElement("div",{class:"col-md-6 m-auto"},o.a.createElement("div",{class:"card card-body"},o.a.createElement("h1",{class:"text-center mb-3"},o.a.createElement("i",{class:"fas fa-sign-in-alt"}),"  Login"),o.a.createElement("form",{id:"form",onSubmit:this.onSubmit},o.a.createElement("div",{class:"form-group"},o.a.createElement("label",{for:"email"},"Phone"),o.a.createElement("input",{onChange:this.onChangeU,type:"text",id:"username",name:"email",value:this.state.Username,class:"form-control",placeholder:"Enter PhoneNumber"})),o.a.createElement("button",{type:"btn",class:"btn btn-primary btn-block",id:"btn"},"Login")),o.a.createElement("script",{src:"https://code.jquery.com/jquery-3.5.1.slim.min.js",integrity:"sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj",crossorigin:"anonymous"}),o.a.createElement("script",{src:"https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js",integrity:"sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo",crossorigin:"anonymous"}),o.a.createElement("script",{src:"https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/js/bootstrap.min.js",integrity:"sha384-OgVRvuATP1z7JjHLkuOU7Xw704+h835Lr+6QL9UvYjZE3Ipu6Tp75j7Bh/kR0JKI",crossorigin:"anonymous"})))))}}]),a}(n.Component),g=function(t){Object(i.a)(a,t);var e=Object(m.a)(a);function a(){var t;Object(c.a)(this,a);for(var n=arguments.length,o=new Array(n),s=0;s<n;s++)o[s]=arguments[s];return(t=e.call.apply(e,[this].concat(o))).state={data:[]},t.onClick=function(){t.props.showFactor(t.props.data)},t}return Object(l.a)(a,[{key:"render",value:function(){return console.log(this.props.data),o.a.createElement("div",null,o.a.createElement("link",{rel:"stylesheet",href:"https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/css/bootstrap.min.css",integrity:"sha384-9aIt2nRpC12Uk9gS9baDl411NQApFmC26EwAOH8WgZl5MYYxFfc+NcPb1dKGj7Sk",crossorigin:"anonymous"}),o.a.createElement("button",{type:"button",className:"btn btn-primary btn-block form-control",onClick:this.onClick},this.props.data))}}]),a}(n.Component),v=function(t){Object(i.a)(a,t);var e=Object(m.a)(a);function a(){var t;Object(c.a)(this,a);for(var n=arguments.length,o=new Array(n),s=0;s<n;s++)o[s]=arguments[s];return(t=e.call.apply(e,[this].concat(o))).state={data:[]},t}return Object(l.a)(a,[{key:"componentDidMount",value:function(){console.log(this.props.factors)}},{key:"render",value:function(){var t=this;return this.props.factors.map((function(e){return o.a.createElement(g,{data:e.id,showFactor:t.props.showFactor})}))}}]),a}(n.Component),E=function(t){Object(i.a)(a,t);var e=Object(m.a)(a);function a(){return Object(c.a)(this,a),e.apply(this,arguments)}return Object(l.a)(a,[{key:"render",value:function(){this.props.images;return this.props.images.map((function(t){return o.a.createElement("img",{src:"data:image/jpeg;base64,"+t.bytes,className:"img-fluid w-100"})}))}}]),a}(n.Component),y=a(21),C=function(t){Object(i.a)(a,t);var e=Object(m.a)(a);function a(){var t;Object(c.a)(this,a);for(var n=arguments.length,o=new Array(n),s=0;s<n;s++)o[s]=arguments[s];return(t=e.call.apply(e,[this].concat(o))).state={product:"",no:"",value:"",total:"",fetched:!1,items:[],selectedItem:""},t.show=function(e,a,n){t.setState({total:t.state.value*t.state.no})},t.onChangeV=function(e){t.setState({value:e.target.value})},t.onChangeN=function(e){t.setState({no:e.target.value}),console.log(t.state.no)},t.selectedItem=function(e){t.setState({selectedItem:e.target.value})},t.setProp=function(){t.setState({total:t.state.value*t.state.no}),t.props.setItem(t.state.no,t.state.value,t.state.total,t.state.selectedItem,t.props.data)},t}return Object(l.a)(a,[{key:"componentDidMount",value:function(){var t=Object(p.a)(d.a.mark((function t(){var e=this;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if([],this.state.fetched){t.next=5;break}return this.setState({fetched:!0}),t.next=5,f.a.get("http://app.bazarsefid.com/api/Administrator/GetProducts",{headers:{Authorization:"Bearer "+sessionStorage.getItem("token")}}).then((function(t){var a=e.state.items;a=a.concat(o.a.createElement("option",null)),e.setState({items:a}),t.data.map((function(t){var n=t.title;a=a.concat(o.a.createElement("option",{value:n},n)),e.setState({items:a})})),e.setState({fetched:!0})}));case 5:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"render",value:function(){var t;return o.a.createElement("div",null,o.a.createElement("link",{rel:"stylesheet",href:"https://use.fontawesome.com/releases/v5.13.0/css/all.css",integrity:"sha384-Bfad6CLCknfcloXFOyFnlgtENryhrpZCe29RTifKEixXQZ38WheV+i/6YWSzkz3V",crossorigin:"anonymous",type:"text/css"}),o.a.createElement("link",{rel:"stylesheet",href:"https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/css/bootstrap.min.css",integrity:"sha384-9aIt2nRpC12Uk9gS9baDl411NQApFmC26EwAOH8WgZl5MYYxFfc+NcPb1dKGj7Sk",crossorigin:"anonymous"}),o.a.createElement("div",{className:"card"},o.a.createElement("div",{className:"card-body"},o.a.createElement("div",{className:"row"},o.a.createElement("div",{className:"col"},o.a.createElement("label",{for:"total"},"Total: "),o.a.createElement("input",{id:"total",name:"total",value:this.state.total,onClick:this.setProp,className:"form-control",readOnly:!0})),o.a.createElement("div",{className:"col"},o.a.createElement("label",{for:"value"},"value: "),o.a.createElement("input",{onChange:this.onChangeV,id:"value",name:"value",value:this.state.value,className:"form-control"})),o.a.createElement("div",{className:"col"},o.a.createElement("label",{for:"No"},"No: "),o.a.createElement("input",(t={id:"No",name:"No"},Object(y.a)(t,"id","No"),Object(y.a)(t,"onChange",this.onChangeN),Object(y.a)(t,"value",this.state.no),Object(y.a)(t,"className","form-control"),t))),o.a.createElement("div",{className:"col"},o.a.createElement("label",{for:"select"},"Item: "),o.a.createElement("select",{name:"select",id:"items",className:"form-control",onChange:this.selectedItem},this.state.items))))))}}]),a}(n.Component),N=function(t){Object(i.a)(a,t);var e=Object(m.a)(a);function a(){return Object(c.a)(this,a),e.apply(this,arguments)}return Object(l.a)(a,[{key:"render",value:function(){var t=this;return this.props.Items.map((function(e){return o.a.createElement(C,{data:e,setItem:t.props.setItem})}))}}]),a}(n.Component),k=a(49),S=function(t){Object(i.a)(a,t);var e=Object(m.a)(a);function a(){var t;Object(c.a)(this,a);for(var n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return(t=e.call.apply(e,[this].concat(s))).state={addNewContact:!1,addNewItem:!1,newContactPhone:"",newProductName:"",newContactName:"",users:[],selectedUserPhone:"",usersOption:[],images:[],factors:[],loading:!1,items:[],makeFactor:!1,factorItem:[],toBeSent:[],endOfFactor:!1,selectedPreFactor:[],contacts:[],contactOptions:[],date:"",selectedContact:"",factorData:{factorItems:[],preFactorId:"",state:{isClear:!0},contactId:"",date:""},endOfFactorClicked:!1},t.onSubmit=function(){var t=Object(p.a)(d.a.mark((function t(e){return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.preventDefault();case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),t.showFactor=function(e){for(var a=t.state.factors,n=0,o=0;o<a.length;o++)if(a[o].id==e){n=o;break}t.setState({selectedPreFactor:a[n].id}),t.setState({images:a[n].images})},t.fetchFactor=function(){console.log(t.state.selectedUserPhone),t.setState({loading:!0});f.a.get("http://app.bazarsefid.com/api/Administrator/GetUserUndoneFactors",{params:{phone:t.state.selectedUserPhone},headers:{Authorization:"Bearer "+sessionStorage.getItem("token")}}).then((function(e){console.log(e.data),t.setState({factors:e.data}),t.setState({loading:!1})}))},t.setItem=function(e,a,n,o,s){console.log(e),console.log(a),console.log(e*a),console.log(o),console.log(s),console.log(t.state.selectedPreFactor),console.log(t.state.date),console.log(t.state.selectedContact);var r=t.state.factorData;r.preFactorId=t.state.selectedPreFactor,r.factorItems.push({product:{title:o},quantity:Number(e),price:Number(a)}),t.setState({factorData:r})},t.Box=Object(p.a)(d.a.mark((function e(){var a,n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.setState({makeFactor:!0}),a=(a=t.state.factorItem).concat(Date.now()),t.setState({factorItem:a}),t.setState({endOfFactor:!0}),n=[o.a.createElement("option",null)],e.next=8,f.a.get("http://app.bazarsefid.com/api/Administrator/GetUserContacts",{params:{phone:t.state.selectedUserPhone},headers:{Authorization:"Bearer "+sessionStorage.getItem("token")}}).then((function(e){t.setState({contact:e.data}),console.log("userContact",e),e.data.map((function(t){n.push(o.a.createElement("option",{value:t.id},t.name))})),t.setState({contactOptions:n})}));case 8:case"end":return e.stop()}}),e)}))),t.date=function(e){var a=e.value._d.toISOString();t.setState({date:a});var n=t.state.factorData;n.date=a,t.setState({factorData:n})},t.time=function(t){console.log(t.target.value)},t.selectContact=function(e){t.setState({selectContact:e.target.value});var a=t.state.factorData;e.target.value;a.contactId=e.target.value,console.log(e.target.value),t.setState({factorData:a})},t.addItem=function(){var e=t.state.factorItem;e=e.concat(Date.now()),t.setState({factorItem:e}),t.setState({endOfFactor:!0})},t.endOfFactor=function(e){t.setState({endOfFactorClicked:!0}),console.log(t.state.factorData),f.a.post("http://app.bazarsefid.com/api/Administrator/SubmitUserFactor",t.state.factorData,{headers:{Authorization:"Bearer "+sessionStorage.getItem("token")}}).then((function(e){console.log(e),t.setState({endOfFactorClicked:!1})}))},t.selectUsers=function(e){t.setState({selectedUserPhone:e.target.value})},t.submitNewProductHandler=function(){t.setState({addNewItem:!0})},t.setNewProductName=function(e){t.setState({newProductName:e.target.value})},t.submitNewItem=function(e){f.a.post("http://app.bazarsefid.com/api/Administrator/AddProduct",null,{params:{title:t.state.newProductName},headers:{Authorization:"Bearer "+sessionStorage.getItem("token")}}).then((function(e){if(200==e.status){var a=t.state.factorItem;t.setState({factorItem:a}),t.setState({addNewItem:!1})}}))},t.submitNewContactControler=function(){t.setState({addNewContact:!0})},t.submitNewContact=function(e){var a=t.state.selectedUserPhone;console.log(a),f.a.post("http://app.bazarsefid.com/api/Administrator/AddContactToUser",{UserPhone:a,contactName:t.state.newContactName},{headers:{Authorization:"Bearer "+sessionStorage.getItem("token")}}).then((function(e){if(console.log(e),200==e.status){var a=t.state.contactOptions;a.push(o.a.createElement("option",{value:e.data.id},e.data.name)),t.setState({contactOptions:a}),t.setState({addNewContact:!1})}}))},t.setNewContactName=function(e){t.setState({newContactName:e.target.value})},t.backgroundColor={backgroundColor:"#8A2BE2"},t}return Object(l.a)(a,[{key:"componentDidMount",value:function(){var t=this,e=this.state.users,a=this.state.usersOption;a.push(o.a.createElement("option",null)),f.a.get("http://app.bazarsefid.com/api/Administrator/GetAllUsers",{headers:{Authorization:"Bearer "+sessionStorage.getItem("token")}}).then((function(n){console.log(n.data),n.data.map((function(t){return a.push(o.a.createElement("option",{value:t.phone},t.phone))})),t.setState({usersOption:a}),n.data.map((function(t){return e.push(t)})),console.log(e),t.setState({users:e})}))}},{key:"render",value:function(){return o.a.createElement("div",null,o.a.createElement("link",{rel:"stylesheet",href:"https://use.fontawesome.com/releases/v5.13.0/css/all.css",integrity:"sha384-Bfad6CLCknfcloXFOyFnlgtENryhrpZCe29RTifKEixXQZ38WheV+i/6YWSzkz3V",crossorigin:"anonymous",type:"text/css"}),o.a.createElement("link",{rel:"stylesheet",href:"https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/css/bootstrap.min.css",integrity:"sha384-9aIt2nRpC12Uk9gS9baDl411NQApFmC26EwAOH8WgZl5MYYxFfc+NcPb1dKGj7Sk",crossorigin:"anonymous"}),o.a.createElement("div",{className:"row"},o.a.createElement("div",{className:"col-5"},o.a.createElement("div",{className:"card"},o.a.createElement("label",{for:"select"},"Select User :"),o.a.createElement("select",{name:"select",id:"contacts",onChange:this.selectUsers,className:"form-control"},this.state.usersOption))),o.a.createElement("div",{className:"col-5"}),o.a.createElement("div",{className:"col-2"})),o.a.createElement("div",{className:"row"},o.a.createElement("div",{className:"col-5"},o.a.createElement("button",{className:"btn btn-primary btn-block",id:"box",onClick:this.Box,disabled:this.state.makeFactor,style:this.backgroundColor},"Make Factor"),this.state.makeFactor&&o.a.createElement("button",{className:"btn btn-primary ",onClick:this.addItem,style:this.backgroundColor},"+"),o.a.createElement(N,{Items:this.state.factorItem,setItem:this.setItem}),this.state.endOfFactor&&o.a.createElement("select",{name:"select",id:"items",className:"form-control",onChange:this.selectContact},this.state.contactOptions),this.state.endOfFactor&&o.a.createElement("button",{className:"btn btn-primary form-control",onClick:this.submitNewContactControler,disabled:this.state.addNewContact},"add new Contact"),this.state.addNewContact&&o.a.createElement("input",{type:"text",className:"form-control",placeholder:"new Contact Name",onChange:this.setNewContactName}),this.state.addNewContact&&o.a.createElement("button",{className:"btn btn-primary form-control",onClick:this.submitNewContact},"Submit New Contact"),this.state.endOfFactor&&o.a.createElement("button",{className:"btn btn-primary form-control",onClick:this.submitNewProductHandler,disabled:this.state.addNewContact},"add new Product"),this.state.addNewItem&&o.a.createElement("input",{type:"text",className:"form-control",placeholder:"Item Name",onChange:this.setNewProductName}),this.state.addNewItem&&o.a.createElement("button",{className:"btn btn-primary form-control",onClick:this.submitNewItem},"Submit New Product"),this.state.endOfFactor&&o.a.createElement(k.a,{onClickSubmitButton:this.date.bind(this)}),this.state.endOfFactor&&o.a.createElement("button",{className:"btn btn-primary btn-block",onClick:this.endOfFactor,disabled:this.state.endOfFactorClicked,style:this.backgroundColor},"End Of Factor")),o.a.createElement("div",{className:"col-5"},o.a.createElement(E,{images:this.state.images})),o.a.createElement("div",{className:"col-2"},o.a.createElement("button",{type:"button",className:"btn btn-primary btn-block",id:"fetch",onClick:this.fetchFactor,disabled:this.state.loading,style:this.backgroundColor},this.state.loading&&o.a.createElement("i",{className:"fa fa-refresh fa-spin"}),"Fetch Undone Factors"),o.a.createElement(v,{factors:this.state.factors,showFactor:this.showFactor,className:"form-control"}))))}}]),a}(n.Component),w=function(t){Object(i.a)(a,t);var e=Object(m.a)(a);function a(){var t;Object(c.a)(this,a);for(var n=arguments.length,o=new Array(n),s=0;s<n;s++)o[s]=arguments[s];return(t=e.call.apply(e,[this].concat(o))).state={code:"",message:""},t.onChangeU=function(e){t.setState({code:e.target.value})},t.onSubmit=function(){var e=Object(p.a)(d.a.mark((function e(a){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.preventDefault(),e.next=3,f.a.post("http://app.bazarsefid.com/api/Login/VerifyCode",{phone:sessionStorage.getItem("phone"),code:Number(t.state.code)}).then((function(t){400===t.status?(console.log("wtf"),document.getElementById("message").hidden=!1):200===t.status&&(console.log(t),sessionStorage.setItem("token",t.data.token),sessionStorage.setItem("Granted",!0),window.location.href="/dashboard")})).catch((function(t){console.log(t.response)}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),t}return Object(l.a)(a,[{key:"render",value:function(){return o.a.createElement("div",null,o.a.createElement("link",{href:"https://stackpath.bootstrapcdn.com/bootswatch/4.5.0/pulse/bootstrap.min.css",rel:"stylesheet",integrity:"sha384-t87SWLASAVDfD3SOypT7WDQZv9X6r0mq1lMEc6m1/+tAVfCXosegm1BvaIiQm3zB",crossorigin:"anonymous"}),o.a.createElement("div",{className:"row mt-5"},o.a.createElement("div",{className:"col-md-6 m-auto"},o.a.createElement("div",{className:"card card-body"},o.a.createElement("h1",{classNmae:"text-center mb-3"},o.a.createElement("i",{className:"fas fa-sign-in-alt"}),"Code Verify"),o.a.createElement("form",{id:"form",onSubmit:this.onSubmit},o.a.createElement("div",{className:"form-group"},o.a.createElement("label",{for:"code"},"Code"),o.a.createElement("input",{onChange:this.onChangeU,type:"text",id:"code",name:"code",value:this.state.code,className:"form-control",placeholder:"Enter Code"})),o.a.createElement("button",{type:"btn",className:"btn btn-primary btn-block",id:"btn"},"Send Activation Code")),o.a.createElement("br",null),o.a.createElement("form",{id:"form",onSubmit:this.onSubmit},o.a.createElement("br",null),o.a.createElement("button",{type:"btn",className:"btn btn-primary btn-block",id:"btn"},"Resend Code"))))))}}]),a}(n.Component),O=a(23),j=a(1),I=a(52),F=function(t){var e=t.component,a=Object(I.a)(t,["component"]);return o.a.createElement(j.b,Object.assign({},a,{render:function(t){return sessionStorage.getItem("Granted")?sessionStorage.getItem("Granted")?o.a.createElement(e,null):void 0:o.a.createElement(j.a,{to:"/"})}}))},A=function(t){Object(i.a)(a,t);var e=Object(m.a)(a);function a(){var t;Object(c.a)(this,a);for(var n=arguments.length,o=new Array(n),s=0;s<n;s++)o[s]=arguments[s];return(t=e.call.apply(e,[this].concat(o))).state={Granted:!1},t.loginGranted=function(e){t.setState({Granted:e})},t}return Object(l.a)(a,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){var t=this;return o.a.createElement(O.a,null,o.a.createElement(j.d,null,o.a.createElement(j.b,{exact:!0,path:"/",render:function(e){return o.a.createElement(o.a.Fragment,null,o.a.createElement(b,{loginGranted:t.loginGranted}))}}),o.a.createElement(j.b,{exact:!0,path:"/Code",render:function(t){return o.a.createElement(o.a.Fragment,null,o.a.createElement(w,null))}}),o.a.createElement(F,{exact:!0,component:S,path:"/dashboard"})))}}]),a}(n.Component);r.a.render(o.a.createElement(o.a.StrictMode,null,o.a.createElement(A,null)),document.getElementById("root"))}},[[53,1,2]]]);
//# sourceMappingURL=main.87d59197.chunk.js.map